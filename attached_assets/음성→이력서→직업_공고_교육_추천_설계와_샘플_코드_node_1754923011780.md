# 개요

음성으로 말한 내용을 이력서 형식으로 정리하고, 사용자가 선택한 **1\~2개 업종**(건설/공급/과학기술/마케팅/예술/운수·창고/의료/정보통신/제조)을 기반으로

- **직업(10개)**
- **일자리 공고(5\~10개)**
- **추천 교육/프로그램(3\~6개)** 을 한 번에 보여주는 **엔드 투 엔드 샘플**입니다.

> 실제 채용공고/교육 검색은 나중에 WorkNet·HRD-Net·(가능 시) Saramin API로 교체할 수 있게 어댑터를 분리했습니다. 지금은 \*\*메모리 DB(샘플 데이터)\*\*로 동작합니다.

---

## 아키텍처(간단)

```
[음성(STT)] → [이력서 텍스트] → (POST /api/resume)
                                       │
                                       ├─ 이력서 파싱(경력·학력·기술)
                                       └─ 업종 자동 추정(top2) 반환

[사용자, 1~2개 업종 선택] → (POST /api/choose-sectors)
                                 │
                                 ├─ 직업 추천 10
                                 ├─ 공고 추천 5~10
                                 └─ 교육/프로그램 추천 3~6
```

---

## 점수 알고리즘(요약)

- 최종 점수 = `0.40*업종일치 + 0.25*기술적합 + 0.20*경력연차 + 0.10*학력 + 0.05*고용형태`
- 업종일치: 선택 업종과 동일(1) 아니면(0).
- 기술적합: `(이력서 기술 ∩ 항목 기술) / 항목 기술 수`.
- 경력연차: 항목의 최소 연차 충족 시 1, 부족하면 선형감점.
- 학력: 요구 학력 이상이면 1, 아니면 0.
- 고용형태: 사용자가 선호를 선택한 경우 가산(샘플에선 중립).

> 모든 가중치는 코드에서 쉽게 바꿀 수 있습니다.

---

## 서버(Express) — `server.js`

```js
// package.json 에 "type":"module" 추가
import express from 'express';
import cors from 'cors';

const app = express();
app.use(cors());
app.use(express.json());

// 1) 업종/키워드 사전
const SECTORS = [
  '건설업','공급업','과학 기술 서비스업','마케팅','예술',
  '운수및 창고업','의료','정보통신업','제조업'
];

const sectorVocab = {
  '건설업': ['현장','토목','건축','시공','안전','품질','공정','BIM','도면','감리','LH','철근','콘크리트'],
  '공급업': ['전기','가스','증기','공기조절','변전','배전','에너지','설비','유틸리티','계량'],
  '과학 기술 서비스업': ['연구','실험','R&D','분석','시뮬레이션','모델링','테스트','프로토타입','성능','데이터'],
  '마케팅': ['브랜딩','캠페인','디지털','콘텐츠','SEO','광고','성과지표','CRM','퍼포먼스','바이럴'],
  '예술': ['공연','전시','문화','디자인','기획','예술교육','무대','크리에이티브','촬영','에디팅'],
  '운수및 창고업': ['물류','창고','WMS','운송','배차','3PL','입출고','재고','SCM','배송'],
  '의료': ['병원','임상','의료기기','간호','의사','EMR','진단','재활','약무','보건'],
  '정보통신업': ['소프트웨어','네트워크','백엔드','프론트엔드','DB','API','클라우드','보안','모바일','AI'],
  '제조업': ['공정','설비','품질','양산','라인','PLC','자동화','FMEA','MES','원가']
};

// 2) 간단 토크나이저 & 헬퍼
const tokenize = (s='') => (s.toLowerCase().replace(/[^\p{L}\p{N}\s]/gu,' ').split(/\s+/).filter(Boolean));
const hasAny = (text, keywords=[]) => keywords.reduce((acc,kw)=>acc + (text.includes(kw) ? 1:0), 0);

// 3) 이력서 파싱(간단 버전)
const ALL_SKILLS = [
  // 공통 기술 키워드 (필요시 확장)
  '프로젝트','리더','관리','엑셀','파워포인트','파이썬','자바','SQL','AutoCAD','PLC','CNC','AI','AWS','Docker','React','Node','품질','안전','도면','회계','영업','R&D','물류','SCM','WMS','EMR'
];

function extractProfile(resumeText=''){
  const text = resumeText.toLowerCase();
  const yearsMatch = text.match(/(\d{1,2})\s*년/);
  const years = yearsMatch ? Math.min(40, parseInt(yearsMatch[1],10)) : 0;
  const edu = /박사/.test(text) ? '박사' : /석사/.test(text) ? '석사' : /학사|대졸/.test(text) ? '학사' : '무관';
  const skills = ALL_SKILLS.filter(k=> text.includes(k.toLowerCase()));
  return { years, edu, skills };
}

// 4) 업종 자동 분류(topK)
function rankSectors(resumeText='', topK=2){
  const text = resumeText.toLowerCase();
  const scores = SECTORS.map(sector=>{
    const score = hasAny(text, sectorVocab[sector]);
    return { sector, score };
  }).sort((a,b)=> b.score - a.score);
  return scores.slice(0, topK);
}

// 5) 샘플 직업/공고/교육 DB (실서비스에선 외부 API로 교체)
const occupations = [
  { id: 'occ-cs-01', sector: '건설업', title: '현장 시공관리자', minYears: 3, reqEdu: '학사', skills:['도면','공정','안전'] },
  { id: 'occ-cs-02', sector: '건설업', title: 'BIM 모델러', minYears: 2, reqEdu: '무관', skills:['BIM','도면'] },
  { id: 'occ-sup-01', sector: '공급업', title: '변전 설비 엔지니어', minYears: 4, reqEdu: '학사', skills:['전기','설비'] },
  { id: 'occ-sup-02', sector: '공급업', title: '에너지 계량 운영', minYears: 1, reqEdu: '무관', skills:['계량','데이터'] },
  { id: 'occ-st-01', sector: '과학 기술 서비스업', title: 'R&D 연구원', minYears: 3, reqEdu: '석사', skills:['연구','실험','분석'] },
  { id: 'occ-st-02', sector: '과학 기술 서비스업', title: '시뮬레이션 엔지니어', minYears: 2, reqEdu: '학사', skills:['시뮬레이션','모델링'] },
  { id: 'occ-mkt-01', sector: '마케팅', title: '디지털 마케터', minYears: 2, reqEdu: '무관', skills:['디지털','광고','성과지표'] },
  { id: 'occ-mkt-02', sector: '마케팅', title: 'CRM 매니저', minYears: 3, reqEdu: '학사', skills:['CRM','데이터'] },
  { id: 'occ-art-01', sector: '예술', title: '문화행사 기획자', minYears: 1, reqEdu: '무관', skills:['기획','문화'] },
  { id: 'occ-art-02', sector: '예술', title: '콘텐츠 에디터', minYears: 1, reqEdu: '무관', skills:['콘텐츠','에디팅'] },
  { id: 'occ-log-01', sector: '운수및 창고업', title: '물류 운영 매니저', minYears: 2, reqEdu: '무관', skills:['물류','WMS','SCM'] },
  { id: 'occ-log-02', sector: '운수및 창고업', title: '배차/운송 코디네이터', minYears: 1, reqEdu: '무관', skills:['배차','운송'] },
  { id: 'occ-med-01', sector: '의료', title: '의료기기 영업/교육', minYears: 2, reqEdu: '학사', skills:['의료기기','교육'] },
  { id: 'occ-med-02', sector: '의료', title: '병원 EMR 운영', minYears: 1, reqEdu: '무관', skills:['EMR','데이터'] },
  { id: 'occ-it-01', sector: '정보통신업', title: '백엔드 개발자', minYears: 2, reqEdu: '무관', skills:['Node','DB','API','클라우드'] },
  { id: 'occ-it-02', sector: '정보통신업', title: '프론트엔드 개발자', minYears: 2, reqEdu: '무관', skills:['React','웹','모바일'] },
  { id: 'occ-mfg-01', sector: '제조업', title: '생산 품질 엔지니어', minYears: 3, reqEdu: '학사', skills:['품질','FMEA','MES'] },
  { id: 'occ-mfg-02', sector: '제조업', title: '설비 자동화(PLC)', minYears: 2, reqEdu: '무관', skills:['PLC','자동화'] },
];

const jobsDB = [
  // 실제 서비스에서는 외부 API 어댑터로 교체
  { id:'job1', sector:'건설업', title:'중견건설 시공관리', company:'A건설', years:3, edu:'학사', skills:['도면','공정','안전'], url:'#' },
  { id:'job2', sector:'정보통신업', title:'백엔드 주니어', company:'테크B', years:2, edu:'무관', skills:['Node','DB','API'], url:'#' },
  { id:'job3', sector:'제조업', title:'품질관리', company:'제조C', years:3, edu:'학사', skills:['품질','MES'], url:'#' },
  { id:'job4', sector:'운수및 창고업', title:'물류 운영', company:'물류D', years:2, edu:'무관', skills:['WMS','SCM'], url:'#' },
  { id:'job5', sector:'마케팅', title:'디지털 마케터', company:'마케팅E', years:2, edu:'무관', skills:['광고','성과지표'], url:'#' },
  { id:'job6', sector:'과학 기술 서비스업', title:'시뮬레이션 엔지니어', company:'랩F', years:2, edu:'학사', skills:['시뮬레이션'], url:'#' },
  { id:'job7', sector:'의료', title:'EMR 운영', company:'병원G', years:1, edu:'무관', skills:['EMR'], url:'#' },
  { id:'job8', sector:'예술', title:'문화행사 기획', company:'문화H', years:1, edu:'무관', skills:['기획'], url:'#' },
  { id:'job9', sector:'공급업', title:'변전 설비', company:'에너지I', years:4, edu:'학사', skills:['전기','설비'], url:'#' },
  { id:'job10', sector:'정보통신업', title:'프론트엔드', company:'테크J', years:2, edu:'무관', skills:['React'], url:'#' },
  { id:'job11', sector:'제조업', title:'PLC 자동화', company:'팩토리K', years:2, edu:'무관', skills:['PLC','자동화'], url:'#' },
  { id:'job12', sector:'마케팅', title:'CRM 매니저', company:'리테일L', years:3, edu:'학사', skills:['CRM','데이터'], url:'#' },
];

const programsDB = [
  { id:'pg1', title:'PLC 자동화 실무', skills:['PLC','자동화'] },
  { id:'pg2', title:'품질/공정 FMEA', skills:['품질','FMEA'] },
  { id:'pg3', title:'React 프런트엔드', skills:['React','웹'] },
  { id:'pg4', title:'Node 백엔드 API', skills:['Node','API','DB'] },
  { id:'pg5', title:'물류 WMS/SCM', skills:['WMS','SCM'] },
  { id:'pg6', title:'시뮬레이션 입문', skills:['시뮬레이션','모델링'] },
  { id:'pg7', title:'BIM 모델링', skills:['BIM','도면'] },
  { id:'pg8', title:'EMR 실무 운영', skills:['EMR'] },
  { id:'pg9', title:'디지털 마케팅', skills:['광고','성과지표'] },
  { id:'pg10', title:'전기설비 기초', skills:['전기','설비'] },
  { id:'pg11', title:'데이터/CRM', skills:['데이터','CRM'] },
  { id:'pg12', title:'안전관리 실무', skills:['안전'] },
];

// 6) 스코어링
const W = { domain:0.40, skills:0.25, years:0.20, edu:0.10, type:0.05 };

const eduRank = v => ({'무관':0,'학사':1,'석사':2,'박사':3})[v] ?? 0;

function scoreItem(item, profile, chosenSectors){
  const domain = chosenSectors.includes(item.sector) ? 1 : 0;
  const itemSkills = item.skills ?? [];
  const inter = itemSkills.filter(s=> profile.skills.includes(s.toLowerCase()) || profile.skills.includes(s));
  const skills = itemSkills.length ? inter.length / itemSkills.length : 0;
  const years = item.minYears ? Math.min(1, profile.years / item.minYears) : 1;
  const edu = eduRank(profile.edu) >= eduRank(item.reqEdu ?? '무관') ? 1 : 0;
  const type = 0.5; // 고용형태 선호 로직 자리(지금은 중립)
  return W.domain*domain + W.skills*skills + W.years*years + W.edu*edu + W.type*type;
}

// 7) 추천기
function recommendOccupations(chosenSectors, profile, k=10){
  return occupations
    .map(o=> ({...o, score: scoreItem(o, profile, chosenSectors)}))
    .sort((a,b)=> b.score - a.score)
    .slice(0, k);
}

function recommendJobs(chosenSectors, profile, kMin=5, kMax=10){
  const ranked = jobsDB
    .map(j=> ({...j, score: scoreItem(j, profile, chosenSectors)}))
    .sort((a,b)=> b.score - a.score);
  const k = Math.min(kMax, Math.max(kMin, ranked.length));
  return ranked.slice(0, k);
}

function recommendPrograms(chosenSectors, profile, kMin=3, kMax=6){
  // 부족 기술(선택 업종의 주요 키워드 - 보유 기술)
  const needed = chosenSectors
    .flatMap(s=> sectorVocab[s])
    .filter((kw,i,arr)=> arr.indexOf(kw)===i);
  const missing = needed.filter(kw=> !profile.skills.includes(kw.toLowerCase()) && !profile.skills.includes(kw));

  // 프로그램이 커버하는 기술 교집합 수로 정렬
  const ranked = programsDB
    .map(p=> ({...p, cover: p.skills.filter(s=> missing.includes(s)).length}))
    .filter(p=> p.cover > 0)
    .sort((a,b)=> b.cover - a.cover);

  const k = Math.min(kMax, Math.max(kMin, ranked.length || kMin));
  return (ranked.length ? ranked : programsDB).slice(0, k);
}

// 8) API
app.post('/api/resume', (req,res)=>{
  const { resumeText='' } = req.body || {};
  const profile = extractProfile(resumeText);
  const sectorGuess = rankSectors(resumeText, 2);
  res.json({ profile, sectorGuess, sectors: SECTORS });
});

app.post('/api/choose-sectors', (req,res)=>{
  const { resumeText='', chosenSectors=[] } = req.body || {};
  const profile = extractProfile(resumeText);
  const occ = recommendOccupations(chosenSectors, profile, 10);
  const jobs = recommendJobs(chosenSectors, profile, 5, 10);
  const progs = recommendPrograms(chosenSectors, profile, 3, 6);
  res.json({ profile, occupations: occ, jobs, programs: progs });
});

app.listen(3001, ()=> console.log('API server running on http://localhost:3001'));
```

### 실행

```bash
npm init -y
npm i express cors
# package.json 에 { "type":"module", "scripts": {"start":"node server.js"} } 추가
npm run start
```

---

## 프런트(React 단일 컴포넌트) — `App.jsx`

> Tailwind 없이도 동작하는 간단 버전입니다. (원하면 shadcn/ui 적용 가능)

```jsx
import { useState } from 'react';

export default function App(){
  const [resumeText, setResumeText] = useState('10년 경력, 학사. 건설 현장 공정/품질/안전 관리, 도면 검토, PLC 자동화 협업 경험.');
  const [profile, setProfile] = useState(null);
  const [sectorGuess, setSectorGuess] = useState([]);
  const [sectors, setSectors] = useState([]);
  const [chosen, setChosen] = useState([]);
  const [result, setResult] = useState(null);
  const [loading, setLoading] = useState(false);

  const analyzeResume = async () => {
    setLoading(true);
    const r = await fetch('http://localhost:3001/api/resume', {
      method:'POST', headers:{'Content-Type':'application/json'},
      body: JSON.stringify({ resumeText })
    });
    const data = await r.json();
    setProfile(data.profile);
    setSectorGuess(data.sectorGuess);
    setSectors(data.sectors);
    setChosen(data.sectorGuess.map(s=> s.sector)); // 초기값: 추정 top2
    setLoading(false);
  };

  const toggleSector = (s) => {
    const exists = chosen.includes(s);
    if(!exists && chosen.length===2){
      alert('업종은 최대 2개까지 선택할 수 있어요.');
      return;
    }
    setChosen(exists ? chosen.filter(x=>x!==s) : [...chosen, s]);
  };

  const runRecommend = async () => {
    if(chosen.length===0){ alert('업종을 1~2개 선택해주세요.'); return; }
    setLoading(true);
    const r = await fetch('http://localhost:3001/api/choose-sectors', {
      method:'POST', headers:{'Content-Type':'application/json'},
      body: JSON.stringify({ resumeText, chosenSectors: chosen })
    });
    const data = await r.json();
    setResult(data);
    setLoading(false);
  };

  return (
    <div style={{maxWidth:900, margin:'40px auto', fontFamily:'system-ui, sans-serif'}}>
      <h1>이력서 기반 직업·공고·교육 추천</h1>
      <p>음성은 서버에서 STT→텍스트로 받은 후, 여기엔 텍스트만 붙여넣으면 됩니다.</p>

      <textarea value={resumeText} onChange={e=>setResumeText(e.target.value)} rows={6}
        style={{width:'100%', padding:12, border:'1px solid #ddd', borderRadius:8}} />

      <div style={{display:'flex', gap:8, marginTop:12}}>
        <button onClick={analyzeResume} disabled={loading}
          style={{padding:'10px 16px', borderRadius:8, border:'1px solid #ccc', background:'#f9f9f9'}}>이력서 분석</button>
        <button onClick={runRecommend} disabled={loading || !profile}
          style={{padding:'10px 16px', borderRadius:8, border:'1px solid #0a7', background:'#0fa', color:'#053'}}>추천 보기</button>
      </div>

      {loading && <p>분석/추천 중...</p>}

      {profile && (
        <div style={{marginTop:20}}>
          <h3>프로필 추출</h3>
          <pre style={{background:'#fafafa', padding:12, borderRadius:8}}>{JSON.stringify(profile, null, 2)}</pre>

          <h3>업종 선택 (최대 2개)</h3>
          <div style={{display:'flex', flexWrap:'wrap', gap:10}}>
            {sectors.map(s=> (
              <label key={s} style={{border:'1px solid #ddd', padding:'6px 10px', borderRadius:20}}>
                <input type="checkbox" checked={chosen.includes(s)} onChange={()=>toggleSector(s)} /> {s}
              </label>
            ))}
          </div>

          {sectorGuess?.length>0 && (
            <p style={{marginTop:8, color:'#666'}}>자동 추정: {sectorGuess.map(s=> `${s.sector}(${s.score})`).join(', ')}</p>
          )}
        </div>
      )}

      {result && (
        <div style={{marginTop:24}}>
          <h2>직업 추천 Top 10</h2>
          <ol>
            {result.occupations.map(o=> (
              <li key={o.id} style={{margin:'6px 0'}}>
                <b>{o.title}</b> <small>· {o.sector} · 점수 {o.score.toFixed(2)}</small>
                <div style={{color:'#666'}}>요구: {o.minYears}년↑ / {o.reqEdu} / 기술: {o.skills?.join(', ')}</div>
              </li>
            ))}
          </ol>

          <h2>일자리 공고 5~10</h2>
          <ul>
            {result.jobs.map(j=> (
              <li key={j.id} style={{margin:'6px 0'}}>
                <a href={j.url} target="_blank" rel="noreferrer"><b>{j.title}</b></a> <small>· {j.company} · {j.sector} · 점수 {j.score.toFixed(2)}</small>
                <div style={{color:'#666'}}>요구: {j.years}년↑ / {j.edu} / 기술: {j.skills?.join(', ')}</div>
              </li>
            ))}
          </ul>

          <h2>추천 프로그램 3~6</h2>
          <ul>
            {result.programs.map(p=> (
              <li key={p.id} style={{margin:'6px 0'}}>
                <b>{p.title}</b> <small>· 커버 기술: {p.skills?.join(', ')}</small>
              </li>
            ))}
          </ul>
        </div>
      )}
    </div>
  );
}
```

### 실행(간단)

- Vite 등으로 React 앱을 만든 뒤 위 `App.jsx`로 교체하고 `npm run dev`.
- 서버는 3001, 프런트는 5173 기준. CORS 허용되어 있음.

---

## 실제 데이터 연동을 위한 어댑터 예시

> 나중에 WorkNet·HRD-Net·Saramin 등으로 교체할 때 `jobsDB`/`programsDB` 대신 아래 함수를 사용하세요.

```js
// adapters/jobs.worknet.js (예시)
export async function fetchJobsFromWorkNet({ sectors, keywords, minYears }){
  // 1) 섹터→키워드 매핑 후 쿼리 생성
  // 2) WorkNet OpenAPI 호출 (axios/fetch)
  // 3) 표준화 형태로 반환: { id, sector, title, company, years, edu, skills, url }
  return [];
}

// adapters/programs.hrdnet.js (예시)
export async function fetchProgramsFromHRD({ missingSkills }){
  // HRD-Net에서 과정 검색 후 skills 매핑
  // 반환: { id, title, skills }
  return [];
}
```

---

## 커스터마이즈 포인트

- **가중치(W)**: 업종 중심/기술 중심 등 서비스 전략에 맞춰 조정.
- **프로필 파서**: 정규식+키워드 → 형태소/NER(예: 품사 기반)로 고도화.
- **업종 사전**: 실제 도메인 키워드 확장(내부 데이터·JD에서 자동 추출 추천).
- **결측 처리**: 경력/학력 미기재 시 보수적 점수 부여.
- **설명 가능성**: 추천 결과에 "왜 추천했는지" 근거(일치 기술, 부족기술)를 함께 노출.

---

## 테스트용 입력 예시

```
10년 경력, 학사. 건설 현장 공정/품질/안전 관리, 도면 검토, PLC 자동화 협업 경험.
```

- 자동 추정 업종: 건설업, 제조업(키워드 매칭)
- 직업 추천 상위: 현장 시공관리자, 생산 품질 엔지니어, PLC 자동화 등
- 프로그램 추천: 안전관리, PLC, 품질/FMEA 등

---

## 다음 단계 제안

1. 실제 공고/교육 API 키 확보 → 어댑터 구현
2. 업종·직무 온톨로지 확장(분야→직무→역량→스킬)
3. 추천 근거 UI(부족 역량 To-Do)와 자동 이력서 업데이트 연결
4. 사용자 선호(고용형태/지역/연봉) 포함 가중치 조정

필요하면 Replit 기준으로 `server.js` + React 템플릿 구성도 바로 맞춰 드릴게요!

